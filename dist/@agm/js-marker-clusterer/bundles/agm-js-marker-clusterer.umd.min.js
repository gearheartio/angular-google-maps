!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@agm/core"),require("rxjs"),require("js-marker-clusterer")):"function"==typeof define&&define.amd?define("@agm/js-marker-clusterer",["exports","@angular/core","@agm/core","rxjs","js-marker-clusterer"],t):t(((e=e||self).ngmaps=e.ngmaps||{},e.ngmaps.jsMarkerClusterer={}),e.ng.core,e.ngmaps.core,e.rxjs)}(this,(function(e,t,r,n){"use strict";var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};Object.create;function o(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}Object.create;var s=function(e){function s(t,r){var n=e.call(this,t,r)||this;return n._mapsWrapper=t,n._zone=r,n._clustererInstance=new Promise((function(e){n._resolver=e})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(s,e),s.prototype.init=function(e){var t=this;this._mapsWrapper.getNativeMap().then((function(r){var n=new MarkerClusterer(r,[],e);t._resolver(n)}))},s.prototype.getClustererInstance=function(){return this._clustererInstance},s.prototype.addMarker=function(e){var t=this.getClustererInstance(),r=this._mapsWrapper.createMarker({position:{lat:e.latitude,lng:e.longitude},label:e.label,draggable:e.draggable,icon:e.iconUrl,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,title:e.title,clickable:e.clickable},!1);Promise.all([t,r]).then((function(e){var t=o(e,2),r=t[0],n=t[1];return r.addMarker(n)})),this._markers.set(e,r)},s.prototype.deleteMarker=function(e){var t=this,r=this._markers.get(e);return null==r?Promise.resolve():r.then((function(r){t._zone.run((function(){r.setMap(null),t.getClustererInstance().then((function(n){n.removeMarker(r),t._markers.delete(e)}))}))}))},s.prototype.clearMarkers=function(){return this.getClustererInstance().then((function(e){e.clearMarkers()}))},s.prototype.setGridSize=function(e){this.getClustererInstance().then((function(t){t.setGridSize(e.gridSize)}))},s.prototype.setMaxZoom=function(e){this.getClustererInstance().then((function(t){t.setMaxZoom(e.maxZoom)}))},s.prototype.setStyles=function(e){this.getClustererInstance().then((function(t){t.setStyles(e.styles)}))},s.prototype.setZoomOnClick=function(e){this.getClustererInstance().then((function(t){void 0!==e.zoomOnClick&&(t.zoomOnClick_=e.zoomOnClick)}))},s.prototype.setAverageCenter=function(e){this.getClustererInstance().then((function(t){void 0!==e.averageCenter&&(t.averageCenter_=e.averageCenter)}))},s.prototype.setImagePath=function(e){this.getClustererInstance().then((function(t){void 0!==e.imagePath&&(t.imagePath_=e.imagePath)}))},s.prototype.setMinimumClusterSize=function(e){this.getClustererInstance().then((function(t){void 0!==e.minimumClusterSize&&(t.minimumClusterSize_=e.minimumClusterSize)}))},s.prototype.setImageExtension=function(e){this.getClustererInstance().then((function(t){void 0!==e.imageExtension&&(t.imageExtension_=e.imageExtension)}))},s.prototype.createClusterEventObservable=function(e){var t=this;return n.Observable.create((function(r){t._zone.runOutsideAngular((function(){t._clustererInstance.then((function(n){n.addListener(e,(function(e){return t._zone.run((function(){return r.next(e)}))}))}))}))}))},s.prototype.setCalculator=function(e){this.getClustererInstance().then((function(t){"function"==typeof e.calculator&&t.setCalculator(e.calculator)}))},s.ctorParameters=function(){return[{type:r.GoogleMapsAPIWrapper},{type:t.NgZone}]},s.decorators=[{type:t.Injectable}],s.ctorParameters=function(){return[{type:r.GoogleMapsAPIWrapper},{type:t.NgZone}]},s}(r.MarkerManager),a=function(){function e(e){this._clusterManager=e,this.clusterClick=new t.EventEmitter,this._observableSubscriptions=[]}return e.prototype.ngOnDestroy=function(){this._clusterManager.clearMarkers(),this._observableSubscriptions.forEach((function(e){return e.unsubscribe()}))},e.prototype.ngOnChanges=function(e){e.gridSize&&this._clusterManager.setGridSize(this),e.maxZoom&&this._clusterManager.setMaxZoom(this),e.zoomOnClick&&this._clusterManager.setZoomOnClick(this),e.averageCenter&&this._clusterManager.setAverageCenter(this),e.minimumClusterSize&&this._clusterManager.setMinimumClusterSize(this),e.imagePath&&this._clusterManager.setImagePath(this),e.imageExtension&&this._clusterManager.setImageExtension(this),e.calculator&&this._clusterManager.setCalculator(this),e.styles&&this._clusterManager.setStyles(this)},e.prototype._addEventListeners=function(){var e=this;[{name:"clusterclick",handler:function(){return e.clusterClick.emit()}}].forEach((function(t){var r=e._clusterManager.createClusterEventObservable(t.name).subscribe(t.handler);e._observableSubscriptions.push(r)}))},e.prototype.ngOnInit=function(){this._addEventListeners(),this._clusterManager.init({gridSize:this.gridSize,maxZoom:this.maxZoom,zoomOnClick:this.zoomOnClick,averageCenter:this.averageCenter,minimumClusterSize:this.minimumClusterSize,styles:this.styles,imagePath:this.imagePath,imageExtension:this.imageExtension,calculator:this.calculator})},e.ctorParameters=function(){return[{type:s}]},e.decorators=[{type:t.Directive,args:[{selector:"agm-marker-cluster",providers:[s,{provide:r.MarkerManager,useExisting:s},r.InfoWindowManager]}]}],e.ctorParameters=function(){return[{type:s}]},e.propDecorators={gridSize:[{type:t.Input}],maxZoom:[{type:t.Input}],zoomOnClick:[{type:t.Input}],averageCenter:[{type:t.Input}],minimumClusterSize:[{type:t.Input}],styles:[{type:t.Input}],calculator:[{type:t.Input}],imagePath:[{type:t.Input}],imageExtension:[{type:t.Input}],clusterClick:[{type:t.Output}]},e}(),u=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.AgmCoreModule],declarations:[a],exports:[a]}]}],e}();e.AgmJsMarkerClustererModule=u,e.AgmMarkerCluster=a,e.ClusterManager=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=agm-js-marker-clusterer.umd.min.js.map